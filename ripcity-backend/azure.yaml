# Azure App Service Configuration
# Deploy using Azure CLI: az webapp up --name ripcity-backend

runtime:
  name: "node"
  version: "18"

build:
  commands:
    - npm ci
    - npm run build

run:
  command: "npm start"

environment_variables:
  NODE_ENV: "production"
  PORT: "8080"
  
# Azure-specific optimizations  
web_concurrency: 2
health_check: "/health"
startup_timeout: 120

# File system
persistent_storage: false

# Networking
ingress:
  external_ingress: true
  target_port: 8080
  
cors:
  allow_origins:
    - "https://ripcityticketdispatch.works"
    - "https://ripcity-backend.azurewebsites.net"
