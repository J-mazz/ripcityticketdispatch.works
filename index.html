<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rip City Ticket Dispatch - AI-Powered Portland Trail Blazers & Event Deal Monitor</title>
    <meta name="description" content="Get the best deals on Portland Trail Blazers tickets and Portland events with AI-powered deal scoring and real-time alerts.">
    <script src="https://js.stripe.com/v3/"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
</head>
<body class="bg-gray-50">
    <!-- Navigation -->
    <nav class="bg-red-600 text-white py-4 px-6">
        <div class="max-w-7xl mx-auto flex justify-between items-center">
            <div class="flex items-center">
                <i class="fas fa-basketball-ball text-2xl mr-3"></i>
                <h1 class="text-xl font-bold">Rip City Ticket Dispatch</h1>
            </div>
            <div class="flex space-x-6">
                <a href="#home" class="hover:text-red-200">Home</a>
                <a href="#deals" class="hover:text-red-200">Deals</a>
                <a href="#pricing" class="hover:text-red-200">Pricing</a>
                <a href="#api" class="hover:text-red-200">API</a>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section id="home" class="bg-gradient-to-br from-red-600 to-black text-white py-20">
        <div class="max-w-7xl mx-auto px-6 text-center">
            <h2 class="text-5xl font-bold mb-6">Never Miss a Portland Deal Again</h2>
            <p class="text-xl mb-8 max-w-3xl mx-auto">AI-powered ticket deal monitoring for Portland Trail Blazers, Timbers, concerts, and events. Get instant alerts when prices drop below your target.</p>
            <div class="flex justify-center space-x-4">
                <button id="startFreeBtn" class="bg-white text-red-600 px-8 py-3 rounded-lg font-bold hover:bg-gray-100 transition">
                    Start Free
                </button>
                <button id="viewDealsBtn" class="border-2 border-white px-8 py-3 rounded-lg font-bold hover:bg-white hover:text-red-600 transition">
                    View Live Deals
                </button>
            </div>
        </div>
    </section>

    <!-- Live Deal Score -->
    <section class="bg-white py-12">
        <div class="max-w-7xl mx-auto px-6">
            <div class="bg-gradient-to-r from-green-500 to-blue-500 rounded-lg p-8 text-white text-center">
                <h3 class="text-2xl font-bold mb-4">ðŸ”¥ Live Deal Alert</h3>
                <div class="grid md:grid-cols-3 gap-6">
                    <div>
                        <div class="text-3xl font-bold">92/100</div>
                        <div class="text-sm">AI Deal Score</div>
                    </div>
                    <div>
                        <div class="text-3xl font-bold">$45</div>
                        <div class="text-sm">vs $89 avg</div>
                    </div>
                    <div>
                        <div class="text-3xl font-bold">Trail Blazers</div>
                        <div class="text-sm">vs Lakers - Dec 15</div>
                    </div>
                </div>
                <button class="mt-4 bg-white text-gray-800 px-6 py-2 rounded-lg font-bold hover:bg-gray-100">
                    Grab This Deal
                </button>
            </div>
        </div>
    </section>

    <!-- Features -->
    <section class="py-16">
        <div class="max-w-7xl mx-auto px-6">
            <h2 class="text-3xl font-bold text-center mb-12">Why Choose Rip City Ticket Dispatch?</h2>
            <div class="grid md:grid-cols-3 gap-8">
                <div class="text-center">
                    <div class="bg-red-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-robot text-red-600 text-xl"></i>
                    </div>
                    <h3 class="text-xl font-bold mb-4">AI Deal Scoring</h3>
                    <p class="text-gray-600">Our AI analyzes thousands of tickets to score deals 0-100, so you know which ones are actually worth it.</p>
                </div>
                <div class="text-center">
                    <div class="bg-red-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-bell text-red-600 text-xl"></i>
                    </div>
                    <h3 class="text-xl font-bold mb-4">Instant Alerts</h3>
                    <p class="text-gray-600">Get notified the moment tickets drop below your price targets via SMS, email, or push notification.</p>
                </div>
                <div class="text-center">
                    <div class="bg-red-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-heart text-red-600 text-xl"></i>
                    </div>
                    <h3 class="text-xl font-bold mb-4">Portland Focus</h3>
                    <p class="text-gray-600">Built specifically for Portland fans - Trail Blazers, Timbers, concerts at Moda Center, and more.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Current Deals -->
    <section id="deals" class="bg-gray-100 py-16">
        <div class="max-w-7xl mx-auto px-6">
            <h2 class="text-3xl font-bold text-center mb-12">Live Deals</h2>
            <div id="dealsContainer" class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Deals will be loaded here -->
            </div>
        </div>
    </section>

    <!-- Pricing -->
    <section id="pricing" class="py-16">
        <div class="max-w-7xl mx-auto px-6">
            <h2 class="text-3xl font-bold text-center mb-12">Choose Your Plan</h2>
            <div class="grid md:grid-cols-4 gap-6">
                <!-- Free Plan -->
                <div class="bg-white rounded-lg shadow-lg p-6 border">
                    <h3 class="text-xl font-bold mb-4">Free</h3>
                    <div class="text-3xl font-bold mb-4">$0<span class="text-sm text-gray-600">/month</span></div>
                    <ul class="space-y-2 mb-6">
                        <li class="flex items-center"><i class="fas fa-check text-green-500 mr-2"></i> 5 deal alerts/day</li>
                        <li class="flex items-center"><i class="fas fa-check text-green-500 mr-2"></i> Basic AI scoring</li>
                        <li class="flex items-center"><i class="fas fa-check text-green-500 mr-2"></i> Email notifications</li>
                    </ul>
                    <button class="w-full bg-gray-200 text-gray-800 py-2 rounded-lg font-bold hover:bg-gray-300" onclick="selectPlan('free')">
                        Get Started
                    </button>
                </div>

                <!-- Pro Plan -->
                <div class="bg-white rounded-lg shadow-lg p-6 border-2 border-red-500">
                    <div class="bg-red-500 text-white px-3 py-1 rounded-full text-sm font-bold mb-4 inline-block">Popular</div>
                    <h3 class="text-xl font-bold mb-4">Pro</h3>
                    <div class="text-3xl font-bold mb-4">$9.99<span class="text-sm text-gray-600">/month</span></div>
                    <ul class="space-y-2 mb-6">
                        <li class="flex items-center"><i class="fas fa-check text-green-500 mr-2"></i> Unlimited alerts</li>
                        <li class="flex items-center"><i class="fas fa-check text-green-500 mr-2"></i> Advanced AI scoring</li>
                        <li class="flex items-center"><i class="fas fa-check text-green-500 mr-2"></i> SMS + Email alerts</li>
                        <li class="flex items-center"><i class="fas fa-check text-green-500 mr-2"></i> Price drop predictions</li>
                    </ul>
                    <button class="w-full bg-red-500 text-white py-2 rounded-lg font-bold hover:bg-red-600" onclick="selectPlan('pro')">
                        Start Pro
                    </button>
                </div>

                <!-- Premium Plan -->
                <div class="bg-white rounded-lg shadow-lg p-6 border">
                    <h3 class="text-xl font-bold mb-4">Premium</h3>
                    <div class="text-3xl font-bold mb-4">$19.99<span class="text-sm text-gray-600">/month</span></div>
                    <ul class="space-y-2 mb-6">
                        <li class="flex items-center"><i class="fas fa-check text-green-500 mr-2"></i> Everything in Pro</li>
                        <li class="flex items-center"><i class="fas fa-check text-green-500 mr-2"></i> VIP early access</li>
                        <li class="flex items-center"><i class="fas fa-check text-green-500 mr-2"></i> Season ticket intel</li>
                        <li class="flex items-center"><i class="fas fa-check text-green-500 mr-2"></i> Custom deal filters</li>
                    </ul>
                    <button class="w-full bg-purple-500 text-white py-2 rounded-lg font-bold hover:bg-purple-600" onclick="selectPlan('premium')">
                        Go Premium
                    </button>
                </div>

                <!-- Enterprise Plan -->
                <div class="bg-white rounded-lg shadow-lg p-6 border">
                    <h3 class="text-xl font-bold mb-4">Enterprise</h3>
                    <div class="text-3xl font-bold mb-4">$99.99<span class="text-sm text-gray-600">/month</span></div>
                    <ul class="space-y-2 mb-6">
                        <li class="flex items-center"><i class="fas fa-check text-green-500 mr-2"></i> Everything in Premium</li>
                        <li class="flex items-center"><i class="fas fa-check text-green-500 mr-2"></i> API access</li>
                        <li class="flex items-center"><i class="fas fa-check text-green-500 mr-2"></i> White-label options</li>
                        <li class="flex items-center"><i class="fas fa-check text-green-500 mr-2"></i> Dedicated support</li>
                    </ul>
                    <button class="w-full bg-black text-white py-2 rounded-lg font-bold hover:bg-gray-800" onclick="selectPlan('enterprise')">
                        Contact Sales
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- API Documentation -->
    <section id="api" class="bg-gray-100 py-16">
        <div class="max-w-7xl mx-auto px-6">
            <h2 class="text-3xl font-bold text-center mb-12">Developer API</h2>
            <div class="bg-white rounded-lg shadow-lg p-8">
                <h3 class="text-xl font-bold mb-4">Live Deals Endpoint</h3>
                <div class="bg-gray-900 text-green-400 p-4 rounded-lg mb-4 font-mono">
                    GET https://ripcityticketdispatch.works/api/deals
                </div>
                <p class="text-gray-600 mb-4">Returns current deals with AI scoring, pricing data, and event details.</p>
                
                <h4 class="font-bold mb-2">Example Response:</h4>
                <div class="bg-gray-100 p-4 rounded-lg font-mono text-sm">
{<br>
  "deals": [<br>
    {<br>
      "id": "deal_123",<br>
      "event": "Portland Trail Blazers vs Lakers",<br>
      "venue": "Moda Center",<br>
      "date": "2025-12-15T19:00:00Z",<br>
      "aiScore": 92,<br>
      "price": 45,<br>
      "avgPrice": 89,<br>
      "section": "Lower Bowl",<br>
      "url": "https://ticketmaster.com/..."<br>
    }<br>
  ]<br>
}
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-black text-white py-12">
        <div class="max-w-7xl mx-auto px-6">
            <div class="grid md:grid-cols-4 gap-8">
                <div>
                    <h3 class="text-xl font-bold mb-4">Rip City Ticket Dispatch</h3>
                    <p class="text-gray-400">AI-powered ticket deals for Portland sports and events.</p>
                </div>
                <div>
                    <h4 class="font-bold mb-4">Quick Links</h4>
                    <ul class="space-y-2 text-gray-400">
                        <li><a href="#deals" class="hover:text-white">Current Deals</a></li>
                        <li><a href="#pricing" class="hover:text-white">Pricing</a></li>
                        <li><a href="#api" class="hover:text-white">API Docs</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-bold mb-4">Teams</h4>
                    <ul class="space-y-2 text-gray-400">
                        <li>Portland Trail Blazers</li>
                        <li>Portland Timbers</li>
                        <li>Portland Thorns</li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-bold mb-4">Venues</h4>
                    <ul class="space-y-2 text-gray-400">
                        <li>Moda Center</li>
                        <li>Providence Park</li>
                        <li>McMenamins Crystal Ballroom</li>
                    </ul>
                </div>
            </div>
            <div class="border-t border-gray-800 mt-8 pt-8 text-center text-gray-400">
                <p>&copy; 2025 Rip City Ticket Dispatch. Built for Portland sports fans.</p>
            </div>
        </div>
    </footer>

    <script>
        // Initialize Stripe
        const stripe = Stripe('pk_test_51234567890abcdef'); // Replace with your publishable key
        
        // API Configuration
        const API_BASE = 'https://king-prawn-app-qwnx4.ondigitalocean.app';
        
        // Load deals on page load
        document.addEventListener('DOMContentLoaded', function() {
            loadDeals();
        });

        // Load deals from API
        async function loadDeals() {
            try {
                const response = await fetch(`${API_BASE}/api/deals`);
                const data = await response.json();
                displayDeals(data.deals || []);
            } catch (error) {
                console.error('Error loading deals:', error);
                // Show sample deals if API fails
                displayDeals(getSampleDeals());
            }
        }

        // Display deals in the UI
        function displayDeals(deals) {
            const container = document.getElementById('dealsContainer');
            container.innerHTML = deals.map(deal => `
                <div class="bg-white rounded-lg shadow-lg p-6">
                    <div class="flex justify-between items-start mb-4">
                        <h3 class="font-bold text-lg">${deal.event}</h3>
                        <div class="bg-gradient-to-r from-green-500 to-blue-500 text-white px-3 py-1 rounded-full text-sm font-bold">
                            ${deal.aiScore}/100
                        </div>
                    </div>
                    <p class="text-gray-600 mb-2">${deal.venue} â€¢ ${new Date(deal.date).toLocaleDateString()}</p>
                    <div class="flex justify-between items-center mb-4">
                        <div>
                            <span class="text-2xl font-bold text-green-600">$${deal.price}</span>
                            <span class="text-gray-500 line-through ml-2">$${deal.avgPrice}</span>
                        </div>
                        <span class="text-sm text-green-600 font-bold">
                            ${Math.round((1 - deal.price/deal.avgPrice) * 100)}% off
                        </span>
                    </div>
                    <p class="text-sm text-gray-600 mb-4">${deal.section}</p>
                    <button class="w-full bg-red-500 text-white py-2 rounded-lg font-bold hover:bg-red-600" onclick="window.open('${deal.url}', '_blank')">
                        View Deal
                    </button>
                </div>
            `).join('');
        }

        // Sample deals for demo
        function getSampleDeals() {
            return [
                {
                    id: '1',
                    event: 'Portland Trail Blazers vs Lakers',
                    venue: 'Moda Center',
                    date: '2025-12-15T19:00:00Z',
                    aiScore: 92,
                    price: 45,
                    avgPrice: 89,
                    section: 'Lower Bowl Section 101',
                    url: 'https://ticketmaster.com'
                },
                {
                    id: '2',
                    event: 'Portland Timbers vs Seattle',
                    venue: 'Providence Park',
                    date: '2025-12-20T19:30:00Z',
                    aiScore: 87,
                    price: 28,
                    avgPrice: 45,
                    section: 'Army General Admission',
                    url: 'https://ticketmaster.com'
                },
                {
                    id: '3',
                    event: 'Twenty One Pilots',
                    venue: 'Moda Center',
                    date: '2026-01-15T20:00:00Z',
                    aiScore: 78,
                    price: 67,
                    avgPrice: 95,
                    section: 'Upper Bowl Section 304',
                    url: 'https://ticketmaster.com'
                }
            ];
        }

        // Plan selection
        async function selectPlan(planType) {
            if (planType === 'free') {
                alert('ðŸŽ‰ Welcome to Rip City Ticket Dispatch! Your free account is ready.');
                return;
            }

            try {
                const response = await fetch(`${API_BASE}/api/payments/create-checkout`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        planType: planType,
                        successUrl: `${window.location.origin}?success=true`,
                        cancelUrl: `${window.location.origin}?canceled=true`
                    })
                });

                const { sessionId } = await response.json();
                
                // Redirect to Stripe Checkout
                const { error } = await stripe.redirectToCheckout({
                    sessionId: sessionId
                });

                if (error) {
                    console.error('Stripe error:', error);
                    alert('Payment error. Please try again.');
                }
            } catch (error) {
                console.error('Payment error:', error);
                alert('Payment system temporarily unavailable. Please try again later.');
            }
        }

        // Button handlers
        document.getElementById('startFreeBtn').onclick = () => selectPlan('free');
        document.getElementById('viewDealsBtn').onclick = () => {
            document.getElementById('deals').scrollIntoView({ behavior: 'smooth' });
        };

        // Check for payment success/cancel
        const urlParams = new URLSearchParams(window.location.search);
        if (urlParams.get('success')) {
            alert('ðŸŽ‰ Payment successful! Welcome to Rip City Ticket Dispatch Premium!');
        } else if (urlParams.get('canceled')) {
            alert('Payment canceled. You can upgrade anytime from your account.');
        }
    </script>
</body>
</html>