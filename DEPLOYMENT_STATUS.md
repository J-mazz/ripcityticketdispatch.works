# üöÄ DigitalOcean Deployment Checklist

## ‚úÖ **What's Ready on Our End**

### **Repository Setup**
- ‚úÖ Backend merged into main repository (`J-mazz/Mazzlabs.work`)
- ‚úÖ Latest code pushed to `main` branch
- ‚úÖ App specification file at `.do/app.yaml`
- ‚úÖ Backend builds successfully (TypeScript compiles)
- ‚úÖ All dependencies listed in `package.json`

### **Configuration Files**
- ‚úÖ `package.json` with correct scripts:
  - `npm run build` ‚Üí TypeScript compilation
  - `npm start` ‚Üí Production server
- ‚úÖ `tsconfig.json` configured properly
- ‚úÖ Source code in `/rip-city-backend/src/`
- ‚úÖ Entry point: `dist/server.js`

### **Environment Variables Defined**
- ‚úÖ `NODE_ENV=production`
- ‚úÖ `PORT=8080`
- ‚úÖ `CORS_ORIGINS` for frontend domains
- ‚ö†Ô∏è `TICKETMASTER_API_KEY` (needs real value in DO dashboard)

## üîß **What DigitalOcean Needs to Do**

### **App Platform Settings**
1. **Import App Spec**: Upload `.do/app.yaml`
2. **Source Directory**: `/rip-city-backend`
3. **Build Command**: `npm run build`
4. **Run Command**: `npm start`
5. **Health Check**: `/health`
6. **Port**: `8080`

### **Environment Variables** (Set in DO Dashboard)
```bash
NODE_ENV=production
PORT=8080
TICKETMASTER_API_KEY=<your-real-api-key>
CORS_ORIGINS=https://ripcityticketdispatch.works,https://mazzlabs.works
```

### **Domain Configuration**
- Primary Domain: `api.ripcityticketdispatch.works`
- SSL Certificate: Auto-generated by DigitalOcean

## üêõ **Common Deployment Issues & Solutions**

### **Build Failures**
- **Issue**: TypeScript compilation errors
- **Status**: ‚úÖ Verified - no errors found

### **Runtime Errors**
- **Issue**: Missing environment variables
- **Solution**: Set `TICKETMASTER_API_KEY` in DO dashboard

### **Port Issues**
- **Issue**: App tries to use wrong port
- **Solution**: ‚úÖ Configured to use `PORT` env var (8080)

### **CORS Issues**
- **Issue**: Frontend can't connect to API
- **Solution**: ‚úÖ CORS configured for production domains

## üìä **How to Test After Deployment**

### **1. Health Check**
```bash
curl https://api.ripcityticketdispatch.works/health
```
Expected response:
```json
{
  "status": "healthy",
  "timestamp": "2025-06-11T...",
  "environment": "production"
}
```

### **2. API Endpoints**
```bash
# Test deals endpoint
curl https://api.ripcityticketdispatch.works/api/deals

# Test blazers endpoint  
curl https://api.ripcityticketdispatch.works/api/blazers

# Test venues endpoint
curl https://api.ripcityticketdispatch.works/api/venues
```

### **3. Frontend Integration**
- Update React app to use new API base URL
- Test that frontend can fetch data from deployed backend

## ‚ö° **If Deployment Fails**

### **Check DigitalOcean Logs**
1. Go to App Platform dashboard
2. Check "Runtime Logs" tab
3. Look for error messages

### **Common Error Messages**
- `Error: Cannot find module` ‚Üí Missing dependency
- `EADDRINUSE` ‚Üí Port already in use (shouldn't happen on DO)
- `API key invalid` ‚Üí Check `TICKETMASTER_API_KEY` value

### **Quick Fixes**
1. **Missing API Key**: Add real Ticketmaster API key to DO environment variables
2. **Build Errors**: Check build logs, ensure all TypeScript files compile
3. **Runtime Errors**: Check that all required environment variables are set

## üéØ **Next Steps After Successful Deployment**

1. **Update Frontend**: Change API base URL to deployed backend
2. **Test Integration**: Verify frontend can connect to deployed API
3. **Monitor Performance**: Use DigitalOcean metrics dashboard
4. **Set up Alerts**: Configure notifications for downtime or errors

---

**Current Status**: ‚úÖ Ready for deployment - all files prepared and code verified
